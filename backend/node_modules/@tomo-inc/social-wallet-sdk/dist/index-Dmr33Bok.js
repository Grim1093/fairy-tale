"use strict";var e=require("./index-Bx0d4IRl.js");function t(e,t){return!!Array.isArray(t)&&(0===t.length||t.every(e?e=>"string"==typeof e:e=>Number.isSafeInteger(e)))}function n(e,t){if("string"!=typeof t)throw Error(e+": string expected");return!0}function r(e){if(!Number.isSafeInteger(e))throw Error("invalid integer: "+e)}function s(e){if(!Array.isArray(e))throw Error("array expected")}function i(e,n){if(!t(!0,n))throw Error(e+": array of strings expected")}function a(e,t,n){if(2>t)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(2>n)throw Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(s(e),!e.length)return[];let i=0;const a=[],o=Array.from(e,(e=>{if(r(e),0>e||e>=t)throw Error("invalid integer: "+e);return e})),u=o.length;for(;;){let e=0,r=!0;for(let s=i;u>s;s++){const a=o[s],u=t*e,c=u+a;if(!Number.isSafeInteger(c)||u/t!==e||c-a!==u)throw Error("convertRadix: carry overflow");e=c%n;const l=Math.floor(c/n);if(o[s]=l,!Number.isSafeInteger(l)||l*n+e!==c)throw Error("convertRadix: carry overflow");r&&(l?r=!1:i=s)}if(a.push(e),r)break}for(let t=0;e.length-1>t&&0===e[t];t++)a.push(0);return a.reverse()}function o(e){r(e);return{encode:t=>{if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw Error("radix.encode input should be Uint8Array");
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
var n;return a(Array.from(t),256,e)},decode:n=>(function(e,n){if(!t(!1,n))throw Error(e+": array of numbers expected")}("radix.decode",n),Uint8Array.from(a(n,e,256)))}}require("eventemitter3"),require("uuid"),require("axios"),require("loglevel"),require("json-bigint"),require("@walletconnect/jsonrpc-http-connection"),require("@walletconnect/jsonrpc-provider"),require("viem"),require("@solana/web3.js"),require("@mysten/sui/transactions"),require("querystring"),require("@tomo-inc/shared-type"),require("@solana/spl-token"),require("bn.js");const u=(c="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",function(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map((e=>e.encode)).reduceRight(n,t),decode:e.map((e=>e.decode)).reduce(n,t)}}(o(58),function(e){const t="string"==typeof e?e.split(""):e,r=t.length;i("alphabet",t);const a=new Map(t.map(((e,t)=>[e,t])));return{encode:n=>(s(n),n.map((n=>{if(!Number.isSafeInteger(n)||0>n||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]}))),decode:t=>(s(t),t.map((t=>{n("alphabet.decode",t);const r=a.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})))}}(c),function(e=""){return n("join",e),{encode:t=>(i("join.decode",t),t.join(e)),decode:t=>(n("join.decode",t),t.split(e))}}("")));var c;const l=e=>u.encode(e),d=e=>u.decode(e);function p(e){const t=e.startsWith("0x")?e.slice(2):e,n=t.length%2==0?t:"0"+t,r=n.match(/[0-9a-fA-F]{2}/g)?.map((e=>parseInt(e,16)))??[];if(r.length!==n.length/2)throw Error("Invalid hex string "+e);return Uint8Array.from(r)}function h(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function g(e){const t=[];let n=0;if(0===e)return[0];for(;e>0;)t[n]=127&e,(e>>=7)&&(t[n]|=128),n+=1;return t}class f{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){const e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){const e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){const e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){const e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){const e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){const e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){const t=new Uint8Array(this.dataView.buffer,this.bytePosition+this.dataView.byteOffset,e);return this.shift(e),t}readULEB(){const e=new Uint8Array(this.dataView.buffer,this.bytePosition+this.dataView.byteOffset),{value:t,length:n}=function(e){let t=0,n=0,r=0;for(;;){const s=e[r];if(r+=1,t|=(127&s)<<n,!(128&s))break;n+=7}return{value:t,length:r}}(e);return this.shift(n),t}readVec(e){const t=this.readULEB(),n=[];for(let r=0;t>r;r++)n.push(e(this,r,t));return n}}function m(e,t=["<",">"]){const[n,r]=t,s=[];let i="",a=0;for(let t=0;e.length>t;t++){const o=e[t];o===n&&a++,o===r&&a--,0!==a||","!==o?i+=o:(s.push(i.trim()),i="")}return s.push(i.trim()),s}class b{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const n=new ArrayBuffer(this.size);new Uint8Array(n).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(n)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return y(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return y(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return y(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return g(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((n,r)=>t(this,n,r,e.length))),this}*[Symbol.iterator](){for(let e=0;this.bytePosition>e;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return function(t,n){switch(n){case"base58":return l(t);case"base64":return e.toBase64(t);case"hex":return h(t);default:throw Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),t)}}function y(e,t){const n=new Uint8Array(t);let r=0;for(;e>0;)n[r]=Number(e%BigInt(256)),e/=BigInt(256),r+=1;return n}var v,w,j,k,O=e=>{throw TypeError(e)},S=(e,t,n)=>t.has(e)||O("Cannot "+n),I=(e,t,n)=>(S(e,t,"read from private field"),n?n.call(e):t.get(e)),x=(e,t,n)=>t.has(e)?O("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),E=(e,t,n,r)=>(S(e,t,"write to private field"),t.set(e,n),n);v=new WeakMap,w=new WeakMap;let T=class t{constructor(e){x(this,v),x(this,w),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),E(this,v,e.write),E(this,w,e.serialize??((e,t)=>{const n=new b({initialSize:this.serializedSize(e)??void 0,...t});return I(this,v).call(this,e,n),n.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),I(this,v).call(this,e,t)}serialize(e,t){return this.validate(e),new B(this,I(this,w).call(this,e,t))}parse(e){const t=new f(e);return this.read(t)}fromHex(e){return this.parse(p(e))}fromBase58(e){return this.parse(d(e))}fromBase64(t){return this.parse(e.fromBase64(t))}transform({name:e,input:n,output:r,validate:s}){return new t({name:e??this.name,read:e=>r?r(this.read(e)):this.read(e),write:(e,t)=>I(this,v).call(this,n?n(e):e,t),serializedSize:e=>this.serializedSize(n?n(e):e),serialize:(e,t)=>I(this,w).call(this,n?n(e):e,t),validate:e=>{s?.(e),this.validate(n?n(e):e)}})}};const C=Symbol.for("@mysten/serialized-bcs");function M(e){return!!e&&"object"==typeof e&&!0===e[C]}class B{constructor(e,t){x(this,j),x(this,k),E(this,j,e),E(this,k,t)}get[C](){return!0}toBytes(){return I(this,k)}toHex(){return h(I(this,k))}toBase64(){return e.toBase64(I(this,k))}toBase58(){return l(I(this,k))}parse(){return I(this,j).parse(I(this,k))}}function P({size:e,...t}){return new T({...t,serializedSize:()=>e})}function U({readMethod:e,writeMethod:t,...n}){return P({...n,read:t=>t[e](),write:(e,n)=>n[t](e),validate:e=>{if(0>e||e>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${e}. Expected value in range 0-${n.maxValue}`);n.validate?.(e)}})}function A({readMethod:e,writeMethod:t,...n}){return P({...n,read:t=>t[e](),write:(e,n)=>n[t](BigInt(e)),validate:e=>{const t=BigInt(e);if(0>t||t>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${t}. Expected value in range 0-${n.maxValue}`);n.validate?.(t)}})}j=new WeakMap,k=new WeakMap;const $={u8:e=>U({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e}),u16:e=>U({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e}),u32:e=>U({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e}),u64:e=>A({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e}),u128:e=>A({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e}),u256:e=>A({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e}),bool:e=>P({name:"bool",size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found "+typeof t)}}),uleb128:e=>function({serialize:e,...t}){const n=new T({...t,serialize:e,write:(e,t)=>{for(const r of n.serialize(e).toBytes())t.write8(r)}});return n}({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(g(e)),...e}),bytes:(e,t)=>P({name:`bytes[${e}]`,size:e,read:t=>t.readBytes(e),write:(t,n)=>{const r=new Uint8Array(t);for(let t=0;e>t;t++)n.write8(r[t]??0)},...t,validate:n=>{if(t?.validate?.(n),!n||"object"!=typeof n||!("length"in n))throw new TypeError("Expected array, found "+typeof n);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}}),byteVector:e=>new T({name:"bytesVector",read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const n=new Uint8Array(e);t.writeULEB(n.length);for(let e=0;n.length>e;e++)t.write8(n[e]??0)},...e,serializedSize:e=>{const t="length"in e?e.length:null;return null==t?null:g(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t)}}),string:e=>function({toBytes:e,fromBytes:t,...n}){return new T({...n,read:e=>{const n=e.readULEB(),r=e.readBytes(n);return t(r)},write:(t,n)=>{const r=e(t);n.writeULEB(r.length);for(let e=0;r.length>e;e++)n.write8(r[e])},serialize:t=>{const n=e(t),r=g(n.length),s=new Uint8Array(r.length+n.length);return s.set(r,0),s.set(n,r.length),s},validate:e=>{if("string"!=typeof e)throw new TypeError(`Invalid ${n.name} value: ${e}. Expected string`);n.validate?.(e)}})}({name:"string",toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e),...e}),fixedArray:(e,t,n)=>new T({name:`${t.name}[${e}]`,read:n=>{const r=Array(e);for(let s=0;e>s;s++)r[s]=t.read(n);return r},write:(e,n)=>{for(const r of e)t.write(r,n)},...n,validate:t=>{if(n?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e)throw new TypeError(`Expected array of length ${e}, found ${t.length}`)}}),option:e=>$.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null}),vector:(e,t)=>new T({name:`vector<${e.name}>`,read:t=>{const n=t.readULEB(),r=Array(n);for(let s=0;n>s;s++)r[s]=e.read(t);return r},write:(t,n)=>{n.writeULEB(t.length);for(const r of t)e.write(r,n)},...t,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found "+typeof e)}}),tuple:(e,t)=>new T({name:`(${e.map((e=>e.name)).join(", ")})`,serializedSize:t=>{let n=0;for(let r=0;e.length>r;r++){const s=e[r].serializedSize(t[r]);if(null==s)return null;n+=s}return n},read:t=>{const n=[];for(const r of e)n.push(r.read(t));return n},write:(t,n)=>{for(let r=0;e.length>r;r++)e[r].write(t[r],n)},...t,validate:n=>{if(t?.validate?.(n),!Array.isArray(n))throw new TypeError("Expected array, found "+typeof n);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}}),struct(e,t,n){const r=Object.entries(t);return new T({name:e,serializedSize:e=>{let t=0;for(const[n,s]of r){const r=s.serializedSize(e[n]);if(null==r)return null;t+=r}return t},read:e=>{const t={};for(const[n,s]of r)t[n]=s.read(e);return t},write:(e,t)=>{for(const[n,s]of r)s.write(e[n],t)},...n,validate:e=>{if(n?.validate?.(e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e)}})},enum(e,t,n){const r=Object.entries(t);return new T({name:e,read:t=>{const n=t.readULEB(),s=r[n];if(!s)throw new TypeError(`Unknown value ${n} for enum ${e}`);const[i,a]=s;return{[i]:a?.read(t)??!0,$kind:i}},write:(e,n)=>{const[s,i]=Object.entries(e).filter((([e])=>Object.hasOwn(t,e)))[0];for(let e=0;r.length>e;e++){const[t,a]=r[e];if(t===s)return n.writeULEB(e),void a?.write(i,n)}},...n,validate:r=>{if(n?.validate?.(r),"object"!=typeof r||null==r)throw new TypeError("Expected object, found "+typeof r);const s=Object.keys(r).filter((e=>void 0!==r[e]&&Object.hasOwn(t,e)));if(1!==s.length)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${e}}`);const[i]=s;if(!Object.hasOwn(t,i))throw new TypeError("Invalid enum variant "+i)}})},map:(e,t)=>$.vector($.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[n,r]of e)t.set(n,r);return t}}),lazy:e=>function(e){let t=null;function n(){return t||(t=e()),t}return new T({name:"lazy",read:e=>n().read(e),serializedSize:e=>n().serializedSize(e),write:(e,t)=>n().write(e,t),serialize:(e,t)=>n().serialize(e,t).toBytes()})}(e)},D=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,R=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;const V=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,z=/^\d+$/,N=e=>{const t=e.split("/");if(2>t.length||t.length>3)return!1;const[n,r,s]=t;return!(void 0!==s&&!z.test(s))&&(!!function(e){return 235>=e.length&&(e.includes("@")?D.test(e):R.test(e))}(n)&&(V.test(r)&&64>r.length))};function _(e){try{return 32===d(e).length}catch(e){return!1}}function q(e){return function(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0}(e)&&32===function(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}(e)}function W(e){return q(e)}function L(e){const[t,n]=e.split("::"),r=N(t),s=e.slice(t.length+n.length+4),i=s.includes("<")?s.slice(0,s.indexOf("<")):s,a=s.includes("<")?m(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map((e=>function(e){return e.includes("::")?L(e):e}(e.trim()))):[];return{address:r?t:G(t),module:n,name:i,typeParams:a}}function F(e){const{address:t,module:n,name:r,typeParams:s}="string"==typeof e?L(e):e;return`${t}::${n}::${r}${s?.length>0?`<${s.map((e=>"string"==typeof e?e:F(e))).join(",")}>`:""}`}function G(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),"0x"+n.padStart(64,"0")}function K(e,t=!1){return G(e,t)}BigInt(1e9);K("0x6");const H="0x2::sui::SUI";K("0x5");const J=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Z=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),X=new Uint32Array(32);function Y(t,n,r,s,i,a){const o=i[a+1];let u=X[2*t],c=X[2*t+1],l=X[2*n],d=X[2*n+1],p=X[2*r],h=X[2*r+1],g=X[2*s],f=X[2*s+1],m=e.add3L(u,l,i[a]);c=e.add3H(m,c,d,o),u=0|m,({Dh:f,Dl:g}={Dh:f^c,Dl:g^u}),({Dh:f,Dl:g}={Dh:e.rotr32H(f,g),Dl:e.rotr32L(f)}),({h:h,l:p}=e.add(h,p,f,g)),({Bh:d,Bl:l}={Bh:d^h,Bl:l^p}),({Bh:d,Bl:l}={Bh:e.rotrSH(d,l,24),Bl:e.rotrSL(d,l,24)}),X[2*t]=u,X[2*t+1]=c,X[2*n]=l,X[2*n+1]=d,X[2*r]=p,X[2*r+1]=h,X[2*s]=g,X[2*s+1]=f}function Q(t,n,r,s,i,a){const o=i[a+1];let u=X[2*t],c=X[2*t+1],l=X[2*n],d=X[2*n+1],p=X[2*r],h=X[2*r+1],g=X[2*s],f=X[2*s+1],m=e.add3L(u,l,i[a]);c=e.add3H(m,c,d,o),u=0|m,({Dh:f,Dl:g}={Dh:f^c,Dl:g^u}),({Dh:f,Dl:g}={Dh:e.rotrSH(f,g,16),Dl:e.rotrSL(f,g,16)}),({h:h,l:p}=e.add(h,p,f,g)),({Bh:d,Bl:l}={Bh:d^h,Bl:l^p}),({Bh:d,Bl:l}={Bh:e.rotrBH(d,l,63),Bl:e.rotrBL(d,l,63)}),X[2*t]=u,X[2*t+1]=c,X[2*n]=l,X[2*n+1]=d,X[2*r]=p,X[2*r+1]=h,X[2*s]=g,X[2*s+1]=f}class ee extends e.Hash{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,e.anumber(t),e.anumber(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=e.u32(this.buffer)}update(t){e.aexists(this),t=e.toBytes(t),e.abytes(t);const{blockLen:n,buffer:r,buffer32:s}=this,i=t.length,a=t.byteOffset,o=t.buffer;for(let u=0;i>u;){this.pos===n&&(e.swap32IfBE(s),this.compress(s,0,!1),e.swap32IfBE(s),this.pos=0);const c=Math.min(n-this.pos,i-u),l=a+u;if(c!==n||l%4||u+c>=i)r.set(t.subarray(u,u+c),this.pos),this.pos+=c,this.length+=c,u+=c;else{const t=new Uint32Array(o,l,Math.floor((i-u)/4));e.swap32IfBE(t);for(let e=0;i>u+n;e+=s.length,u+=n)this.length+=n,this.compress(t,e,!1);e.swap32IfBE(t)}}return this}digestInto(t){e.aexists(this),e.aoutput(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,e.clean(this.buffer.subarray(n)),e.swap32IfBE(r),this.compress(r,0,!0),e.swap32IfBE(r);const s=e.u32(t);this.get().forEach(((t,n)=>s[n]=e.swap8IfBE(t)))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){const{buffer:t,length:n,finished:r,destroyed:s,outputLen:i,pos:a}=this;return e||(e=new this.constructor({dkLen:i})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=r,e.length=n,e.pos=a,e.outputLen=i,e}clone(){return this._cloneInto()}}class te extends ee{constructor(t={}){const n=void 0===t.dkLen?64:t.dkLen;super(128,n),this.v0l=0|Z[0],this.v0h=0|Z[1],this.v1l=0|Z[2],this.v1h=0|Z[3],this.v2l=0|Z[4],this.v2h=0|Z[5],this.v3l=0|Z[6],this.v3h=0|Z[7],this.v4l=0|Z[8],this.v4h=0|Z[9],this.v5l=0|Z[10],this.v5h=0|Z[11],this.v6l=0|Z[12],this.v6h=0|Z[13],this.v7l=0|Z[14],this.v7h=0|Z[15],function(t,n={},r,s,i){if(e.anumber(r),0>t||t>r)throw Error("outputLen bigger than keyLen");const{key:a,salt:o,personalization:u}=n;if(void 0!==a&&(1>a.length||a.length>r))throw Error("key length must be undefined or 1.."+r);if(void 0!==o&&o.length!==s)throw Error("salt must be undefined or "+s);if(void 0!==u&&u.length!==i)throw Error("personalization must be undefined or "+i)}(n,t,64,16,16);let{key:r,personalization:s,salt:i}=t,a=0;if(void 0!==r&&(r=e.toBytes(r),a=r.length),this.v0l^=this.outputLen|a<<8|65536|1<<24,void 0!==i){i=e.toBytes(i);const t=e.u32(i);this.v4l^=e.swap8IfBE(t[0]),this.v4h^=e.swap8IfBE(t[1]),this.v5l^=e.swap8IfBE(t[2]),this.v5h^=e.swap8IfBE(t[3])}if(void 0!==s){s=e.toBytes(s);const t=e.u32(s);this.v6l^=e.swap8IfBE(t[0]),this.v6h^=e.swap8IfBE(t[1]),this.v7l^=e.swap8IfBE(t[2]),this.v7h^=e.swap8IfBE(t[3])}if(void 0!==r){const e=new Uint8Array(this.blockLen);e.set(r),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:n,v1h:r,v2l:s,v2h:i,v3l:a,v3h:o,v4l:u,v4h:c,v5l:l,v5h:d,v6l:p,v6h:h,v7l:g,v7h:f}=this;return[e,t,n,r,s,i,a,o,u,c,l,d,p,h,g,f]}set(e,t,n,r,s,i,a,o,u,c,l,d,p,h,g,f){this.v0l=0|e,this.v0h=0|t,this.v1l=0|n,this.v1h=0|r,this.v2l=0|s,this.v2h=0|i,this.v3l=0|a,this.v3h=0|o,this.v4l=0|u,this.v4h=0|c,this.v5l=0|l,this.v5h=0|d,this.v6l=0|p,this.v6h=0|h,this.v7l=0|g,this.v7h=0|f}compress(t,n,r){this.get().forEach(((e,t)=>X[t]=e)),X.set(Z,16);let{h:s,l:i}=e.fromBig(BigInt(this.length));X[24]=Z[8]^i,X[25]=Z[9]^s,r&&(X[28]=~X[28],X[29]=~X[29]);let a=0;const o=J;for(let e=0;12>e;e++)Y(0,4,8,12,t,n+2*o[a++]),Q(0,4,8,12,t,n+2*o[a++]),Y(1,5,9,13,t,n+2*o[a++]),Q(1,5,9,13,t,n+2*o[a++]),Y(2,6,10,14,t,n+2*o[a++]),Q(2,6,10,14,t,n+2*o[a++]),Y(3,7,11,15,t,n+2*o[a++]),Q(3,7,11,15,t,n+2*o[a++]),Y(0,5,10,15,t,n+2*o[a++]),Q(0,5,10,15,t,n+2*o[a++]),Y(1,6,11,12,t,n+2*o[a++]),Q(1,6,11,12,t,n+2*o[a++]),Y(2,7,8,13,t,n+2*o[a++]),Q(2,7,8,13,t,n+2*o[a++]),Y(3,4,9,14,t,n+2*o[a++]),Q(3,4,9,14,t,n+2*o[a++]);this.v0l^=X[0]^X[16],this.v0h^=X[1]^X[17],this.v1l^=X[2]^X[18],this.v1h^=X[3]^X[19],this.v2l^=X[4]^X[20],this.v2h^=X[5]^X[21],this.v3l^=X[6]^X[22],this.v3h^=X[7]^X[23],this.v4l^=X[8]^X[24],this.v4h^=X[9]^X[25],this.v5l^=X[10]^X[26],this.v5h^=X[11]^X[27],this.v6l^=X[12]^X[28],this.v6h^=X[13]^X[29],this.v7l^=X[14]^X[30],this.v7h^=X[15]^X[31],e.clean(X)}destroy(){this.destroyed=!0,e.clean(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ne=e.createOptHasher((e=>new te(e))),re=/^vector<(.+)>$/,se=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class ie{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const n=e.match(re);if(n)return{vector:ie.parseFromStr(n[1],t)};const r=e.match(se);if(r){return{struct:{address:t?G(r[1]):r[1],module:r[2],name:r[3],typeParams:void 0===r[5]?[]:ie.parseStructTypeArgs(r[5],t)}}}throw Error("Encountered unexpected token when parsing type args for "+e)}static parseStructTypeArgs(e,t=!1){return m(e).map((e=>ie.parseFromStr(e,t)))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${ie.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,n=t.typeParams.map(ie.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${n?`<${n}>`:""}`}throw Error("Invalid TypeTag")}}const ae=$.bytes(32).transform({validate:e=>{const t="string"==typeof e?e:h(e);if(!t||!q(G(t)))throw Error("Invalid Sui address "+t)},input:e=>"string"==typeof e?p(G(e)):e,output:e=>G(h(e))}),oe=$.vector($.u8()).transform({name:"ObjectDigest",input:e=>d(e),output:e=>l(new Uint8Array(e)),validate:e=>{if(32!==d(e).length)throw Error("ObjectDigest must be 32 bytes")}}),ue=$.struct("SuiObjectRef",{objectId:ae,version:$.u64(),digest:oe}),ce=$.struct("SharedObjectRef",{objectId:ae,initialSharedVersion:$.u64(),mutable:$.bool()}),le=$.enum("ObjectArg",{ImmOrOwnedObject:ue,SharedObject:ce,Receiving:ue}),de=$.enum("Owner",{AddressOwner:ae,ObjectOwner:ae,Shared:$.struct("Shared",{initialSharedVersion:$.u64()}),Immutable:null,ConsensusV2:$.struct("ConsensusV2",{authenticator:$.enum("Authenticator",{SingleOwner:ae}),startVersion:$.u64()})}),pe=$.enum("CallArg",{Pure:$.struct("Pure",{bytes:$.vector($.u8()).transform({input:t=>"string"==typeof t?e.fromBase64(t):t,output:t=>e.toBase64(new Uint8Array(t))})}),Object:le}),he=$.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:$.lazy((()=>he)),struct:$.lazy((()=>Oe)),u16:null,u32:null,u256:null}),ge=he.transform({input:e=>"string"==typeof e?ie.parseFromStr(e,!0):e,output:e=>ie.tagToString(e)}),fe=$.enum("Argument",{GasCoin:null,Input:$.u16(),Result:$.u16(),NestedResult:$.tuple([$.u16(),$.u16()])}),me=$.struct("ProgrammableMoveCall",{package:ae,module:$.string(),function:$.string(),typeArguments:$.vector(ge),arguments:$.vector(fe)}),be=$.enum("Command",{MoveCall:me,TransferObjects:$.struct("TransferObjects",{objects:$.vector(fe),address:fe}),SplitCoins:$.struct("SplitCoins",{coin:fe,amounts:$.vector(fe)}),MergeCoins:$.struct("MergeCoins",{destination:fe,sources:$.vector(fe)}),Publish:$.struct("Publish",{modules:$.vector($.vector($.u8()).transform({input:t=>"string"==typeof t?e.fromBase64(t):t,output:t=>e.toBase64(new Uint8Array(t))})),dependencies:$.vector(ae)}),MakeMoveVec:$.struct("MakeMoveVec",{type:(ye=ge,$.enum("Option",{None:null,Some:ye})).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:$.vector(fe)}),Upgrade:$.struct("Upgrade",{modules:$.vector($.vector($.u8()).transform({input:t=>"string"==typeof t?e.fromBase64(t):t,output:t=>e.toBase64(new Uint8Array(t))})),dependencies:$.vector(ae),package:ae,ticket:fe})});var ye;const ve=$.struct("ProgrammableTransaction",{inputs:$.vector(pe),commands:$.vector(be)}),we=$.enum("TransactionKind",{ProgrammableTransaction:ve,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),je=$.enum("TransactionExpiration",{None:null,Epoch:$.u64({name:"unsafe_u64",...ke}).transform({input:e=>e,output:e=>Number(e)})});var ke;const Oe=$.struct("StructTag",{address:ae,module:$.string(),name:$.string(),typeParams:$.vector(he)}),Se=$.struct("GasData",{payment:$.vector(ue),owner:ae,price:$.u64(),budget:$.u64()}),Ie=$.struct("TransactionDataV1",{kind:we,sender:ae,gasData:Se,expiration:je}),xe=$.enum("TransactionData",{V1:Ie}),Ee=$.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Te=$.enum("IntentVersion",{V0:null}),Ce=$.enum("AppId",{Sui:null}),Me=$.struct("Intent",{scope:Ee,version:Te,appId:Ce});function Be(e){return $.struct(`IntentMessage<${e.name}>`,{intent:Me,value:e})}const Pe=$.enum("CompressedSignature",{ED25519:$.fixedArray(64,$.u8()),Secp256k1:$.fixedArray(64,$.u8()),Secp256r1:$.fixedArray(64,$.u8()),ZkLogin:$.vector($.u8())}),Ue=$.enum("PublicKey",{ED25519:$.fixedArray(32,$.u8()),Secp256k1:$.fixedArray(33,$.u8()),Secp256r1:$.fixedArray(33,$.u8()),ZkLogin:$.vector($.u8())}),Ae=$.struct("MultiSigPkMap",{pubKey:Ue,weight:$.u8()}),$e=$.struct("MultiSigPublicKey",{pk_map:$.vector(Ae),threshold:$.u16()}),De=$.struct("MultiSig",{sigs:$.vector(Pe),bitmap:$.u16(),multisig_pk:$e}),Re=$.vector($.u8()).transform({input:t=>"string"==typeof t?e.fromBase64(t):t,output:t=>e.toBase64(new Uint8Array(t))}),Ve=$.struct("SenderSignedTransaction",{intentMessage:Be(xe),txSignatures:$.vector(Re)}),ze=$.vector(Ve,{name:"SenderSignedData"}),Ne=$.struct("PasskeyAuthenticator",{authenticatorData:$.vector($.u8()),clientDataJson:$.string(),userSignature:$.vector($.u8())}),_e=$.enum("PackageUpgradeError",{UnableToFetchPackage:$.struct("UnableToFetchPackage",{packageId:ae}),NotAPackage:$.struct("NotAPackage",{objectId:ae}),IncompatibleUpgrade:null,DigestDoesNotMatch:$.struct("DigestDoesNotMatch",{digest:$.vector($.u8())}),UnknownUpgradePolicy:$.struct("UnknownUpgradePolicy",{policy:$.u8()}),PackageIDDoesNotMatch:$.struct("PackageIDDoesNotMatch",{packageId:ae,ticketId:ae})}),qe=$.struct("ModuleId",{address:ae,name:$.string()}),We=$.struct("MoveLocation",{module:qe,function:$.u16(),instruction:$.u16(),functionName:$.option($.string())}),Le=$.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:$.struct("IndexOutOfBounds",{idx:$.u16()}),SecondaryIndexOutOfBounds:$.struct("SecondaryIndexOutOfBounds",{resultIdx:$.u16(),secondaryIdx:$.u16()}),InvalidResultArity:$.struct("InvalidResultArity",{resultIdx:$.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Fe=$.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Ge=$.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:$.struct("MoveObjectTooBig",{objectSize:$.u64(),maxObjectSize:$.u64()}),MovePackageTooBig:$.struct("MovePackageTooBig",{objectSize:$.u64(),maxObjectSize:$.u64()}),CircularObjectOwnership:$.struct("CircularObjectOwnership",{object:ae}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:$.option(We),MoveAbort:$.tuple([We,$.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:$.struct("CommandArgumentError",{argIdx:$.u16(),kind:Le}),TypeArgumentError:$.struct("TypeArgumentError",{argumentIdx:$.u16(),kind:Fe}),UnusedValueWithoutDrop:$.struct("UnusedValueWithoutDrop",{resultIdx:$.u16(),secondaryIdx:$.u16()}),InvalidPublicFunctionReturnType:$.struct("InvalidPublicFunctionReturnType",{idx:$.u16()}),InvalidTransferObject:null,EffectsTooLarge:$.struct("EffectsTooLarge",{currentSize:$.u64(),maxSize:$.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:$.struct("PackageUpgradeError",{upgradeError:_e}),WrittenObjectsTooLarge:$.struct("WrittenObjectsTooLarge",{currentSize:$.u64(),maxSize:$.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:$.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:$.vector(ae)}),AddressDeniedForCoin:$.struct("AddressDeniedForCoin",{address:ae,coinType:$.string()}),CoinTypeGlobalPause:$.struct("CoinTypeGlobalPause",{coinType:$.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Ke=$.enum("ExecutionStatus",{Success:null,Failed:$.struct("ExecutionFailed",{error:Ge,command:$.option($.u64())})}),He=$.struct("GasCostSummary",{computationCost:$.u64(),storageCost:$.u64(),storageRebate:$.u64(),nonRefundableStorageFee:$.u64()}),Je=$.struct("TransactionEffectsV1",{status:Ke,executedEpoch:$.u64(),gasUsed:He,modifiedAtVersions:$.vector($.tuple([ae,$.u64()])),sharedObjects:$.vector(ue),transactionDigest:oe,created:$.vector($.tuple([ue,de])),mutated:$.vector($.tuple([ue,de])),unwrapped:$.vector($.tuple([ue,de])),deleted:$.vector(ue),unwrappedThenDeleted:$.vector(ue),wrapped:$.vector(ue),gasObject:$.tuple([ue,de]),eventsDigest:$.option(oe),dependencies:$.vector(oe)}),Ze=$.tuple([$.u64(),oe]),Xe=$.enum("ObjectIn",{NotExist:null,Exist:$.tuple([Ze,de])}),Ye=$.enum("ObjectOut",{NotExist:null,ObjectWrite:$.tuple([oe,de]),PackageWrite:Ze}),Qe=$.enum("IDOperation",{None:null,Created:null,Deleted:null}),et=$.struct("EffectsObjectChange",{inputState:Xe,outputState:Ye,idOperation:Qe}),tt=$.enum("UnchangedSharedKind",{ReadOnlyRoot:Ze,MutateDeleted:$.u64(),ReadDeleted:$.u64(),Cancelled:$.u64(),PerEpochConfig:null}),nt=$.struct("TransactionEffectsV2",{status:Ke,executedEpoch:$.u64(),gasUsed:He,transactionDigest:oe,gasObjectIndex:$.option($.u32()),eventsDigest:$.option(oe),dependencies:$.vector(oe),lamportVersion:$.u64(),changedObjects:$.vector($.tuple([ae,et])),unchangedSharedObjects:$.vector($.tuple([ae,tt])),auxDataDigest:$.option(oe)}),rt=$.enum("TransactionEffects",{V1:Je,V2:nt});function st(e){switch(e){case"u8":return $.u8();case"u16":return $.u16();case"u32":return $.u32();case"u64":return $.u64();case"u128":return $.u128();case"u256":return $.u256();case"bool":return $.bool();case"string":return $.string();case"id":case"address":return ae}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[e,n]=t.slice(1);return"vector"===e?$.vector(st(n)):$.option(st(n))}throw Error("Invalid Pure type name: "+e)}const it={...$,U8:$.u8(),U16:$.u16(),U32:$.u32(),U64:$.u64(),U128:$.u128(),U256:$.u256(),ULEB128:$.uleb128(),Bool:$.bool(),String:$.string(),Address:ae,AppId:Ce,Argument:fe,CallArg:pe,Command:be,CompressedSignature:Pe,GasData:Se,Intent:Me,IntentMessage:Be,IntentScope:Ee,IntentVersion:Te,MultiSig:De,MultiSigPkMap:Ae,MultiSigPublicKey:$e,ObjectArg:le,ObjectDigest:oe,Owner:de,PasskeyAuthenticator:Ne,ProgrammableMoveCall:me,ProgrammableTransaction:ve,PublicKey:Ue,SenderSignedData:ze,SenderSignedTransaction:Ve,SharedObjectRef:ce,StructTag:Oe,SuiObjectRef:ue,TransactionData:xe,TransactionDataV1:Ie,TransactionEffects:rt,TransactionExpiration:je,TransactionKind:we,TypeTag:ge};const at={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class ot extends Error{}class ut extends ot{constructor(e,t){super(e),this.code=t,this.type=at[t]??"ServerError"}}class ct extends ot{constructor(e,t,n){super(e),this.status=t,this.statusText=n}}var lt,dt,pt,ht,gt,ft,mt,bt,yt,vt=e=>{throw TypeError(e)},wt=(e,t,n)=>t.has(e)||vt("Cannot "+n),jt=(e,t,n)=>(wt(e,t,"read from private field"),n?n.call(e):t.get(e)),kt=(e,t,n)=>t.has(e)?vt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ot=(e,t,n,r)=>(wt(e,t,"write to private field"),t.set(e,n),n),St=(e,t,n)=>(wt(e,t,"access private method"),n);const It={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class xt{constructor(e,t={}){if(kt(this,mt),kt(this,lt,0),kt(this,dt,0),kt(this,pt,null),kt(this,ht,null),kt(this,gt,new Set),kt(this,ft,new Map),this.endpoint=e,this.options={...It,...t},!this.options.WebSocketConstructor)throw Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),""+t}(this.endpoint))}async makeRequest(e,t,n){const r=await St(this,mt,bt).call(this);return new Promise(((s,i)=>{Ot(this,lt,jt(this,lt)+1),jt(this,ft).set(jt(this,lt),{resolve:s,reject:i,timeout:setTimeout((()=>{jt(this,ft).delete(jt(this,lt)),i(Error("Request timeout: "+e))}),this.options.callTimeout)}),n?.addEventListener("abort",(()=>{jt(this,ft).delete(jt(this,lt)),i(n.reason)})),r.send(JSON.stringify({jsonrpc:"2.0",id:jt(this,lt),method:e,params:t}))})).then((({error:e,result:t})=>{if(e)throw new ut(e.message,e.code);return t}))}async subscribe(e){const t=new Et(e);return jt(this,gt).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}lt=new WeakMap,dt=new WeakMap,pt=new WeakMap,ht=new WeakMap,gt=new WeakMap,ft=new WeakMap,mt=new WeakSet,bt=function(){return jt(this,ht)||Ot(this,ht,new Promise((e=>{jt(this,pt)?.close(),Ot(this,pt,new this.options.WebSocketConstructor(this.endpoint)),jt(this,pt).addEventListener("open",(()=>{Ot(this,dt,0),e(jt(this,pt))})),jt(this,pt).addEventListener("close",(()=>{var e,t,n;(e=this,t=dt,{set _(n){Ot(e,t,n)},get _(){return jt(e,t,n)}})._++,jt(this,dt)>this.options.maxReconnects||setTimeout((()=>{St(this,mt,yt).call(this)}),this.options.reconnectTimeout)})),jt(this,pt).addEventListener("message",(({data:e})=>{let t;try{t=JSON.parse(e)}catch(e){return}if("id"in t&&null!=t.id&&jt(this,ft).has(t.id)){const{resolve:e,timeout:n}=jt(this,ft).get(t.id);clearTimeout(n),e(t)}else if("params"in t){const{params:e}=t;jt(this,gt).forEach((t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)}))}}))}))),jt(this,ht)},yt=async function(){return jt(this,pt)?.close(),Ot(this,ht,null),Promise.allSettled([...jt(this,gt)].map((e=>e.subscribe(this))))};class Et{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=t)}}var Tt,Ct,Mt,Bt,Pt,Ut=e=>{throw TypeError(e)},At=(e,t,n)=>t.has(e)||Ut("Cannot "+n),$t=(e,t,n)=>(At(e,t,"read from private field"),n?n.call(e):t.get(e)),Dt=(e,t,n)=>t.has(e)?Ut("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Rt=(e,t,n,r)=>(At(e,t,"write to private field"),t.set(e,n),n);class Vt{constructor(e){Dt(this,Bt),Dt(this,Tt,0),Dt(this,Ct),Dt(this,Mt),Rt(this,Ct,e)}fetch(e,t){const n=$t(this,Ct).fetch??fetch;if(!n)throw Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,t)}async request(e){Rt(this,Tt,$t(this,Tt)+1);const t=await this.fetch($t(this,Ct).rpc?.url??$t(this,Ct).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"1.30.2","Client-Target-Api-Version":"1.50.0","Client-Request-Method":e.method,...$t(this,Ct).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:$t(this,Tt),method:e.method,params:e.params})});if(!t.ok)throw new ct("Unexpected status code: "+t.status,t.status,t.statusText);const n=await t.json();if("error"in n&&null!=n.error)throw new ut(n.error.message,n.error.code);return n.result}async subscribe(e){const t=await(n=this,r=Bt,s=Pt,At(n,r,"access private method"),s).call(this).subscribe(e);var n,r,s;return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",(()=>{t()}))),async()=>!!await t()}}Tt=new WeakMap,Ct=new WeakMap,Mt=new WeakMap,Bt=new WeakSet,Pt=function(){if(!$t(this,Mt)){const e=$t(this,Ct).WebSocketConstructor??WebSocket;if(!e)throw Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Rt(this,Mt,new xt($t(this,Ct).websocket?.url??$t(this,Ct).url,{WebSocketConstructor:e,...$t(this,Ct).websocket}))}return $t(this,Mt)};var zt,Nt,_t=e=>{throw TypeError(e)},qt=(e,t,n)=>t.has(e)||_t("Cannot "+n),Wt=(e,t,n)=>(qt(e,t,"read from private field"),t.get(e)),Lt=(e,t,n)=>t.has(e)?_t("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ft=(e,t,n,r)=>(qt(e,t,"write to private field"),t.set(e,n),n);zt=new WeakMap,Nt=new WeakMap;let Gt=class e{constructor({prefix:e,cache:t}={}){Lt(this,zt),Lt(this,Nt),Ft(this,zt,e??[]),Ft(this,Nt,t??new Map)}read(e,t){const n=[Wt(this,zt),...e].join(":");if(Wt(this,Nt).has(n))return Wt(this,Nt).get(n);const r=t();return Wt(this,Nt).set(n,r),"object"==typeof r&&null!==r&&"then"in r?Promise.resolve(r).then((e=>(Wt(this,Nt).set(n,e),e))).catch((e=>{throw Wt(this,Nt).delete(n),e})):r}clear(e){const t=[...Wt(this,zt),...e??[]].join(":");if(t)for(const e of Wt(this,Nt).keys())e.startsWith(t)&&Wt(this,Nt).delete(e);else Wt(this,Nt).clear()}scope(t){return new e({prefix:[...Wt(this,zt),...Array.isArray(t)?t:[t]],cache:Wt(this,Nt)})}};class Kt{constructor({network:e}){this.cache=new Gt,this.network=e}$extend(...e){return Object.create(this,Object.fromEntries(e.map((e=>{if("experimental_asClientExtension"in e){const{name:t,register:n}=e.experimental_asClientExtension();return[t,{value:n(this)}]}return[e.name,{value:e.register(this)}]}))))}}function Ht(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?""+e:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function Jt(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=s?.expected??e.expects??null,o=s?.received??Ht(i),u={kind:e.kind,type:e.type,input:i,expected:a,received:o,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${o}`,requirement:e.requirement,path:s?.path,issues:s?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c="schema"===e.kind,l=s?.message??e.message??void 0??(c?void 0:null)??r.message??void 0;l&&(u.message="function"==typeof l?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function Zt(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}var Xt=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Yt(e,t){return{kind:"validation",type:"check",reference:Yt,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&Jt(this,"input",e,t),e}}}function Qt(e){return{kind:"validation",type:"integer",reference:Qt,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&Jt(this,"integer",e,t),e}}}function en(e){return{kind:"transformation",type:"transform",reference:en,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function tn(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function nn(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function rn(e,t){return{kind:"schema",type:"array",reference:rn,expects:"Array",async:!1,item:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let r=0;n.length>r;r++){const s=n[r],i=this.item._run({typed:!1,value:s},t);if(i.issues){const a={type:"array",origin:"value",input:n,key:r,value:s};for(const t of i.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.push(i.value)}}else Jt(this,"type",e,t);return e}}}function sn(e){return{kind:"schema",type:"bigint",reference:sn,expects:"bigint",async:!1,message:e,_run(e,t){return"bigint"==typeof e.value?e.typed=!0:Jt(this,"type",e,t),e}}}function an(e){return{kind:"schema",type:"boolean",reference:an,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:Jt(this,"type",e,t),e}}}function on(e){return{kind:"schema",type:"lazy",reference:on,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function un(e,t){return{kind:"schema",type:"literal",reference:un,expects:Ht(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:Jt(this,"type",e,t),e}}}function cn(e,...t){const n={kind:"schema",type:"nullable",reference:cn,expects:e.expects+" | null",async:!1,wrapped:e,_run(e,t){return null===e.value&&("default"in this&&(e.value=tn(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function ln(e,...t){const n={kind:"schema",type:"nullish",reference:ln,expects:e.expects+" | null | undefined",async:!1,wrapped:e,_run(e,t){return null==e.value&&("default"in this&&(e.value=tn(this,e,t)),null==e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function dn(e){return{kind:"schema",type:"number",reference:dn,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?Jt(this,"type",e,t):e.typed=!0,e}}}function pn(e,t){return{kind:"schema",type:"object",reference:pn,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const r in this.entries){const s=n[r],i=this.entries[r]._run({typed:!1,value:s},t);if(i.issues){const a={type:"object",origin:"value",input:n,key:r,value:s};for(const t of i.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),(void 0!==i.value||r in n)&&(e.value[r]=i.value)}}else Jt(this,"type",e,t);return e}}}function hn(e,...t){const n={kind:"schema",type:"optional",reference:hn,expects:e.expects+" | undefined",async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=tn(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function gn(e,t,n){return{kind:"schema",type:"record",reference:gn,expects:"Object",async:!1,key:e,value:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const r in n)if(Zt(n,r)){const s=n[r],i=this.key._run({typed:!1,value:r},t);if(i.issues){const a={type:"object",origin:"key",input:n,key:r,value:s};for(const t of i.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}const a=this.value._run({typed:!1,value:s},t);if(a.issues){const i={type:"object",origin:"value",input:n,key:r,value:s};for(const t of a.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}i.typed&&a.typed||(e.typed=!1),i.typed&&(e.value[i.value]=a.value)}}else Jt(this,"type",e,t);return e}}}function fn(e){return{kind:"schema",type:"string",reference:fn,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:Jt(this,"type",e,t),e}}}function mn(e,t){return{kind:"schema",type:"tuple",reference:mn,expects:"Array",async:!1,items:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let r=0;this.items.length>r;r++){const s=n[r],i=this.items[r]._run({typed:!1,value:s},t);if(i.issues){const a={type:"array",origin:"value",input:n,key:r,value:s};for(const t of i.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.push(i.value)}}else Jt(this,"type",e,t);return e}}}function bn(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function yn(e,t){return{kind:"schema",type:"union",reference:yn,expects:[...new Set(e.map((e=>e.expects)))].join(" | ")||"never",async:!1,options:e,message:t,_run(e,t){let n,r,s;for(const i of this.options){const a=i._run({typed:!1,value:e.value},t);if(a.typed){if(!a.issues){n=a;break}r?r.push(a):r=[a]}else s?s.push(a):s=[a]}if(n)return n;if(r){if(1===r.length)return r[0];Jt(this,"type",e,t,{issues:bn(r)}),e.typed=!0}else{if(1===s?.length)return s[0];Jt(this,"type",e,t,{issues:bn(s)})}return e}}}function vn(){return{kind:"schema",type:"unknown",reference:vn,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function wn(e,t,n){const r=e._run({typed:!1,value:t},function(e){return{lang:e?.lang??void 0,message:e?.message,abortEarly:e?.abortEarly??void 0,abortPipeEarly:e?.abortPipeEarly??void 0}}(n));if(r.issues)throw new Xt(r.issues);return r.value}function jn(...e){return{...e[0],pipe:e,_run(t,n){for(let r=0;e.length>r;r++){if(t.issues&&("schema"===e[r].kind||"transformation"===e[r].kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=e[r]._run(t,n))}return t}}}function kn(e){return jn(yn(Object.entries(e).map((([e,t])=>pn({[e]:t})))),en((e=>({...e,$kind:Object.keys(e)[0]}))))}const On=jn(fn(),en((e=>G(e))),Yt(q)),Sn=On,In=fn(),xn=jn(yn([fn(),jn(dn(),Qt())]),Yt((e=>{try{return BigInt(e),BigInt(e)>=0&&18446744073709551615n>=BigInt(e)}catch{return!1}}),"Invalid u64")),En=pn({objectId:On,version:xn,digest:fn()}),Tn=jn(yn([pn({GasCoin:un(!0)}),pn({Input:jn(dn(),Qt()),type:hn(un("pure"))}),pn({Input:jn(dn(),Qt()),type:hn(un("object"))}),pn({Result:jn(dn(),Qt())}),pn({NestedResult:mn([jn(dn(),Qt()),jn(dn(),Qt())])})]),en((e=>({...e,$kind:Object.keys(e)[0]})))),Cn=pn({budget:cn(xn),price:cn(xn),owner:cn(On),payment:cn(rn(En))}),Mn=yn([un("address"),un("bool"),un("u8"),un("u16"),un("u32"),un("u64"),un("u128"),un("u256"),pn({vector:on((()=>Mn))}),pn({datatype:pn({package:fn(),module:fn(),type:fn(),typeParameters:rn(on((()=>Mn)))})}),pn({typeParameter:jn(dn(),Qt())})]),Bn=pn({ref:cn(yn([un("&"),un("&mut")])),body:Mn}),Pn=pn({package:Sn,module:fn(),function:fn(),typeArguments:rn(fn()),arguments:rn(Tn),_argumentTypes:hn(cn(rn(Bn)))}),Un=pn({name:fn(),inputs:gn(fn(),yn([Tn,rn(Tn)])),data:gn(fn(),vn())}),An=kn({MoveCall:Pn,TransferObjects:pn({objects:rn(Tn),address:Tn}),SplitCoins:pn({coin:Tn,amounts:rn(Tn)}),MergeCoins:pn({destination:Tn,sources:rn(Tn)}),Publish:pn({modules:rn(In),dependencies:rn(Sn)}),MakeMoveVec:pn({type:cn(fn()),elements:rn(Tn)}),Upgrade:pn({modules:rn(In),dependencies:rn(Sn),package:Sn,ticket:Tn}),$Intent:Un}),$n=kn({ImmOrOwnedObject:En,SharedObject:pn({objectId:Sn,initialSharedVersion:xn,mutable:an()}),Receiving:En}),Dn=kn({Object:$n,Pure:pn({bytes:In}),UnresolvedPure:pn({value:vn()}),UnresolvedObject:pn({objectId:Sn,version:hn(cn(xn)),digest:hn(cn(fn())),initialSharedVersion:hn(cn(xn))})}),Rn=kn({Object:$n,Pure:pn({bytes:In})}),Vn=kn({None:un(!0),Epoch:xn}),zn=pn({version:un(2),sender:ln(On),expiration:ln(Vn),gasData:Cn,inputs:rn(Dn),commands:rn(An)}),Nn={MoveCall(e){const[t,n="",r=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:n,function:r,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map((e=>wn(Tn,e))),address:wn(Tn,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:wn(Tn,e),amounts:t.map((e=>wn(Tn,e)))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:wn(Tn,e),sources:t.map((e=>wn(Tn,e)))}}),Publish:({modules:t,dependencies:n})=>({$kind:"Publish",Publish:{modules:t.map((t=>"string"==typeof t?t:e.toBase64(new Uint8Array(t)))),dependencies:n.map((e=>K(e)))}}),Upgrade:({modules:t,dependencies:n,package:r,ticket:s})=>({$kind:"Upgrade",Upgrade:{modules:t.map((t=>"string"==typeof t?t:e.toBase64(new Uint8Array(t)))),dependencies:n.map((e=>K(e))),package:r,ticket:wn(Tn,s)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map((e=>wn(Tn,e)))}}),Intent:({name:e,inputs:t={},data:n={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map((([e,t])=>[e,Array.isArray(t)?t.map((e=>wn(Tn,e))):wn(Tn,t)]))),data:n}})},_n=pn({digest:fn(),objectId:fn(),version:yn([jn(dn(),Qt()),fn(),sn()])}),qn=kn({ImmOrOwned:_n,Shared:pn({objectId:Sn,initialSharedVersion:xn,mutable:an()}),Receiving:_n}),Wn=kn({Object:qn,Pure:rn(jn(dn(),Qt()))}),Ln=yn([pn({kind:un("Input"),index:jn(dn(),Qt()),value:vn(),type:hn(un("object"))}),pn({kind:un("Input"),index:jn(dn(),Qt()),value:vn(),type:un("pure")})]),Fn=yn([pn({Epoch:jn(dn(),Qt())}),pn({None:cn(un(!0))})]),Gn=jn(yn([dn(),fn(),sn()]),Yt((e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}))),Kn=yn([pn({bool:cn(un(!0))}),pn({u8:cn(un(!0))}),pn({u64:cn(un(!0))}),pn({u128:cn(un(!0))}),pn({address:cn(un(!0))}),pn({signer:cn(un(!0))}),pn({vector:on((()=>Kn))}),pn({struct:on((()=>Hn))}),pn({u16:cn(un(!0))}),pn({u32:cn(un(!0))}),pn({u256:cn(un(!0))})]),Hn=pn({address:fn(),module:fn(),name:fn(),typeParams:rn(Kn)}),Jn=pn({budget:hn(Gn),price:hn(Gn),payment:hn(rn(_n)),owner:hn(fn())}),Zn=yn([...[Ln,pn({kind:un("GasCoin")}),pn({kind:un("Result"),index:jn(dn(),Qt())}),pn({kind:un("NestedResult"),index:jn(dn(),Qt()),resultIndex:jn(dn(),Qt())})]]),Xn=pn({kind:un("MoveCall"),target:jn(fn(),Yt((e=>3===e.split("::").length))),typeArguments:rn(fn()),arguments:rn(Zn)}),Yn=pn({kind:un("TransferObjects"),objects:rn(Zn),address:Zn}),Qn=pn({kind:un("SplitCoins"),coin:Zn,amounts:rn(Zn)}),er=pn({kind:un("MergeCoins"),destination:Zn,sources:rn(Zn)}),tr=pn({kind:un("MakeMoveVec"),type:yn([pn({Some:Kn}),pn({None:cn(un(!0))})]),objects:rn(Zn)}),nr=yn([...[Xn,Yn,Qn,er,pn({kind:un("Publish"),modules:rn(rn(jn(dn(),Qt()))),dependencies:rn(fn())}),pn({kind:un("Upgrade"),modules:rn(rn(jn(dn(),Qt()))),dependencies:rn(fn()),packageId:fn(),ticket:Zn}),tr]]);function rr(t){const n=t.inputs.map(((t,n)=>{if(t.Object)return{kind:"Input",index:n,value:{Object:t.Object.ImmOrOwnedObject?{ImmOrOwned:t.Object.ImmOrOwnedObject}:t.Object.Receiving?{Receiving:{digest:t.Object.Receiving.digest,version:t.Object.Receiving.version,objectId:t.Object.Receiving.objectId}}:{Shared:{mutable:t.Object.SharedObject.mutable,initialSharedVersion:t.Object.SharedObject.initialSharedVersion,objectId:t.Object.SharedObject.objectId}}},type:"object"};if(t.Pure)return{kind:"Input",index:n,value:{Pure:Array.from(e.fromBase64(t.Pure.bytes))},type:"pure"};if(t.UnresolvedPure)return{kind:"Input",type:"pure",index:n,value:t.UnresolvedPure.value};if(t.UnresolvedObject)return{kind:"Input",type:"object",index:n,value:t.UnresolvedObject.objectId};throw Error("Invalid input")}));return{version:1,sender:t.sender??void 0,expiration:"Epoch"===t.expiration?.$kind?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:n,transactions:t.commands.map((t=>{if(t.MakeMoveVec)return{kind:"MakeMoveVec",type:null===t.MakeMoveVec.type?{None:!0}:{Some:ie.parseFromStr(t.MakeMoveVec.type)},objects:t.MakeMoveVec.elements.map((e=>sr(e,n)))};if(t.MergeCoins)return{kind:"MergeCoins",destination:sr(t.MergeCoins.destination,n),sources:t.MergeCoins.sources.map((e=>sr(e,n)))};if(t.MoveCall)return{kind:"MoveCall",target:`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`,typeArguments:t.MoveCall.typeArguments,arguments:t.MoveCall.arguments.map((e=>sr(e,n)))};if(t.Publish)return{kind:"Publish",modules:t.Publish.modules.map((t=>Array.from(e.fromBase64(t)))),dependencies:t.Publish.dependencies};if(t.SplitCoins)return{kind:"SplitCoins",coin:sr(t.SplitCoins.coin,n),amounts:t.SplitCoins.amounts.map((e=>sr(e,n)))};if(t.TransferObjects)return{kind:"TransferObjects",objects:t.TransferObjects.objects.map((e=>sr(e,n))),address:sr(t.TransferObjects.address,n)};if(t.Upgrade)return{kind:"Upgrade",modules:t.Upgrade.modules.map((t=>Array.from(e.fromBase64(t)))),dependencies:t.Upgrade.dependencies,packageId:t.Upgrade.package,ticket:sr(t.Upgrade.ticket,n)};throw Error("Unknown transaction "+Object.keys(t))}))}}function sr(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw Error("Invalid argument "+Object.keys(e))}function ir(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function ar(e){return yn(Object.entries(e).map((([e,t])=>pn({[e]:t}))))}pn({version:un(1),sender:hn(fn()),expiration:ln(Fn),gasConfig:Jn,inputs:rn(Ln),transactions:rn(nr)});const or=ar({GasCoin:un(!0),Input:jn(dn(),Qt()),Result:jn(dn(),Qt()),NestedResult:mn([jn(dn(),Qt()),jn(dn(),Qt())])}),ur=pn({budget:cn(xn),price:cn(xn),owner:cn(On),payment:cn(rn(En))}),cr=pn({package:Sn,module:fn(),function:fn(),typeArguments:rn(fn()),arguments:rn(or)}),lr=pn({name:fn(),inputs:gn(fn(),yn([or,rn(or)])),data:gn(fn(),vn())}),dr=ar({MoveCall:cr,TransferObjects:pn({objects:rn(or),address:or}),SplitCoins:pn({coin:or,amounts:rn(or)}),MergeCoins:pn({destination:or,sources:rn(or)}),Publish:pn({modules:rn(In),dependencies:rn(Sn)}),MakeMoveVec:pn({type:cn(fn()),elements:rn(or)}),Upgrade:pn({modules:rn(In),dependencies:rn(Sn),package:Sn,ticket:or}),$Intent:lr}),pr=ar({ImmOrOwnedObject:En,SharedObject:pn({objectId:Sn,initialSharedVersion:xn,mutable:an()}),Receiving:En}),hr=ar({Object:pr,Pure:pn({bytes:In}),UnresolvedPure:pn({value:vn()}),UnresolvedObject:pn({objectId:Sn,version:hn(cn(xn)),digest:hn(cn(fn())),initialSharedVersion:hn(cn(xn))})}),gr=ar({None:un(!0),Epoch:xn}),fr=pn({version:un(2),sender:ln(On),expiration:ln(gr),gasData:ur,inputs:rn(hr),commands:rn(dr)});const mr={Pure:function(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?e.toBase64(t):t.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:n})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:n,objectId:G(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:n})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:n,objectId:G(e)}}}),ReceivingRef:({objectId:e,digest:t,version:n})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:n,objectId:G(e)}}})};async function br(e,t,n){if(function(e){for(const t of e.commands)switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach((t=>{vr(t,it.U64,e)}));break;case"TransferObjects":vr(t.TransferObjects.address,it.Address,e)}}(e),!function(e,t){return!!e.inputs.some((e=>e.UnresolvedObject||e.UnresolvedPure))||!(t.onlyTransactionKind||e.gasConfig.price&&e.gasConfig.budget&&e.gasConfig.payment)}(e,t))return await yr(e),n();const r=function(e){if(!e.client)throw Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(t);return r.core.resolveTransactionPlugin()(e,t,(async()=>{await yr(e),await n()}))}function yr(e){e.inputs.forEach(((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)}))}function vr(e,t,n){if("Input"!==e.$kind)return;const r=n.inputs[e.Input];"UnresolvedPure"===r.$kind&&(n.inputs[e.Input]=mr.Pure(t.serialize(r.UnresolvedPure.value)))}function wr(e){function t(t,n){if("string"==typeof t)return e(st(t).serialize(n));if(t instanceof Uint8Array||M(t))return e(t);throw Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e(it.U8.serialize(t)),t.u16=t=>e(it.U16.serialize(t)),t.u32=t=>e(it.U32.serialize(t)),t.u64=t=>e(it.U64.serialize(t)),t.u128=t=>e(it.U128.serialize(t)),t.u256=t=>e(it.U256.serialize(t)),t.bool=t=>e(it.Bool.serialize(t)),t.string=t=>e(it.String.serialize(t)),t.id=t.address=t=>e(it.Address.serialize(t)),t.vector=(t,n)=>e(it.vector(st(t)).serialize(n)),t.option=(t,n)=>e(it.option(st(t)).serialize(n)),t}function jr(e){return G(e).replace("0x","")}class kr{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=it.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw Error("Unable to deserialize from bytes.");return kr.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=it.TransactionData.parse(e),n=t?.V1,r=n.kind.ProgrammableTransaction;if(!n||!r)throw Error("Unable to deserialize from bytes.");return kr.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:r.inputs,commands:r.commands})}static restore(t){return new kr(wn(zn,2===t.version?t:function(t){return wn(zn,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map((e=>({digest:e.digest,objectId:e.objectId,version:""+e.version})))??null},inputs:t.inputs.map((t=>{if("Input"===t.kind){if(nn(Wn,t.value)){const n=wn(Wn,t.value);if(n.Object){if(n.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:n.Object.ImmOrOwned.objectId,version:n.Object.ImmOrOwned.version+"",digest:n.Object.ImmOrOwned.digest}}};if(n.Object.Shared)return{Object:{SharedObject:{mutable:n.Object.Shared.mutable??null,initialSharedVersion:n.Object.Shared.initialSharedVersion,objectId:n.Object.Shared.objectId}}};if(n.Object.Receiving)return{Object:{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version+"",objectId:n.Object.Receiving.objectId}}};throw Error("Invalid object input")}return{Pure:{bytes:e.toBase64(new Uint8Array(n.Pure))}}}return"object"===t.type?{UnresolvedObject:{objectId:t.value}}:{UnresolvedPure:{value:t.value}}}throw Error("Invalid input")})),commands:t.transactions.map((t=>{switch(t.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in t.type?ie.tagToString(t.type.Some):null,elements:t.objects.map((e=>ir(e)))}};case"MergeCoins":return{MergeCoins:{destination:ir(t.destination),sources:t.sources.map((e=>ir(e)))}};case"MoveCall":{const[e,n,r]=t.target.split("::");return{MoveCall:{package:e,module:n,function:r,typeArguments:t.typeArguments,arguments:t.arguments.map((e=>ir(e)))}}}case"Publish":return{Publish:{modules:t.modules.map((t=>e.toBase64(Uint8Array.from(t)))),dependencies:t.dependencies}};case"SplitCoins":return{SplitCoins:{coin:ir(t.coin),amounts:t.amounts.map((e=>ir(e)))}};case"TransferObjects":return{TransferObjects:{objects:t.objects.map((e=>ir(e))),address:ir(t.address)}};case"Upgrade":return{Upgrade:{modules:t.modules.map((t=>e.toBase64(Uint8Array.from(t)))),dependencies:t.dependencies,package:t.packageId,ticket:ir(t.ticket)}}}throw Error("Unknown transaction "+Object.keys(t))}))})}(t)))}static getDigestFromBytes(e){const t=function(e,t){const n=Array.from(e+"::").map((e=>e.charCodeAt(0))),r=new Uint8Array(n.length+t.length);return r.set(n),r.set(t,n.length),ne(r,{dkLen:32})}("TransactionData",e);return l(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:n}={}){const r=this.inputs,s=this.commands;if(n)return it.TransactionKind.serialize({ProgrammableTransaction:{inputs:r,commands:s}},{maxSize:e}).toBytes();const i=t?.expiration??this.expiration,a=t?.sender??this.sender,o={...this.gasData,...t?.gasConfig,...t?.gasData};if(!a)throw Error("Missing transaction sender");if(!o.budget)throw Error("Missing gas budget");if(!o.payment)throw Error("Missing gas payment");if(!o.price)throw Error("Missing gas price");const u={sender:jr(a),expiration:i||{None:!0},gasData:{payment:o.payment,owner:jr(this.gasData.owner??a),price:BigInt(o.price),budget:BigInt(o.budget)},kind:{ProgrammableTransaction:{inputs:r,commands:s}}};return it.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,t){const n=this.inputs.length;return this.inputs.push(t),{Input:n,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments(((n,r)=>("Input"===n.$kind&&n.Input===e&&t(n,r),n)))}mapCommandArguments(e,t){const n=this.commands[e];switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map((r=>t(r,n,e)));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map((r=>t(r,n,e))),n.TransferObjects.address=t(n.TransferObjects.address,n,e);break;case"SplitCoins":n.SplitCoins.coin=t(n.SplitCoins.coin,n,e),n.SplitCoins.amounts=n.SplitCoins.amounts.map((r=>t(r,n,e)));break;case"MergeCoins":n.MergeCoins.destination=t(n.MergeCoins.destination,n,e),n.MergeCoins.sources=n.MergeCoins.sources.map((r=>t(r,n,e)));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map((r=>t(r,n,e)));break;case"Upgrade":n.Upgrade.ticket=t(n.Upgrade.ticket,n,e);break;case"$Intent":const r=n.$Intent.inputs;n.$Intent.inputs={};for(const[s,i]of Object.entries(r))n.$Intent.inputs[s]=Array.isArray(i)?i.map((r=>t(r,n,e))):t(i,n,e);break;case"Publish":break;default:throw Error("Unexpected transaction kind: "+n.$kind)}}mapArguments(e){for(const t of this.commands.keys())this.mapCommandArguments(t,e)}replaceCommand(e,t,n=e){if(!Array.isArray(t))return void(this.commands[e]=t);const r=t.length-1;this.commands.splice(e,1,...t),0!==r&&this.mapArguments(((s,i,a)=>{if(e+t.length>a)return s;switch(s.$kind){case"Result":s.Result===e&&(s.Result=n),s.Result>e&&(s.Result+=r);break;case"NestedResult":s.NestedResult[0]===e&&(s.NestedResult[0]=n),s.NestedResult[0]>e&&(s.NestedResult[0]+=r)}return s}))}getDigest(){const e=this.build({onlyTransactionKind:!1});return kr.getDigestFromBytes(e)}snapshot(){return wn(zn,this)}shallowClone(){return new kr({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}}function Or(e){return"string"==typeof e?G(e):e.Object?G(e.Object.ImmOrOwnedObject?e.Object.ImmOrOwnedObject.objectId:e.Object.Receiving?e.Object.Receiving.objectId:e.Object.SharedObject.objectId):e.UnresolvedObject?G(e.UnresolvedObject.objectId):void 0}var Sr,Ir,xr,Er,Tr,Cr,Mr,Br,Pr,Ur,Ar,$r,Dr,Rr,Vr,zr,Nr,_r,qr,Wr=e=>{throw TypeError(e)},Lr=(e,t,n)=>t.has(e)||Wr("Cannot "+n),Fr=(e,t,n)=>(Lr(e,t,"read from private field"),n?n.call(e):t.get(e)),Gr=(e,t,n)=>t.has(e)?Wr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Kr=(e,t,n,r)=>(Lr(e,t,"write to private field"),t.set(e,n),n),Hr=(e,t,n)=>(Lr(e,t,"access private method"),n);function Jr(e,t=1/0){const n=[],r=t=>n[t]??(n[t]={$kind:"NestedResult",NestedResult:[e,t]});return new Proxy({$kind:"Result",Result:e},{set(){throw Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,n){if(n in e)return Reflect.get(e,n);if(n===Symbol.iterator)return function*(){let e=0;for(;t>e;)yield r(e),e++};if("symbol"==typeof n)return;const s=parseInt(n,10);return Number.isNaN(s)||0>s?void 0:r(s)}})}const Zr=Symbol.for("@mysten/transaction");function Xr(e){return!!e&&"object"==typeof e&&!0===e[Zr]}const Yr={buildPlugins:new Map,serializationPlugins:new Map},Qr=Symbol.for("@mysten/transaction/registry");function es(){try{const e=globalThis;return e[Qr]||(e[Qr]=Yr),e[Qr]}catch(e){return Yr}}const ts=class t{constructor(){Gr(this,Ur),Gr(this,Sr),Gr(this,Ir),Gr(this,xr,new Map),Gr(this,Er,[]),Gr(this,Tr,[]),Gr(this,Cr,new Set),Gr(this,Mr,new Set),Gr(this,Br,new Map),Gr(this,Pr),this.object=function(e){function t(t){return e(t)}return t.system=()=>t("0x5"),t.clock=()=>t("0x6"),t.random=()=>t("0x8"),t.denyList=()=>t("0x403"),t.option=({type:e,value:t})=>n=>n.moveCall({typeArguments:[e],target:"0x1::option::"+(null===t?"none":"some"),arguments:null===t?[]:[n.object(t)]}),t}((e=>{if("function"==typeof e)return this.object(this.add(e));if("object"==typeof e&&nn(Tn,e))return e;const t=Or(e),n=Fr(this,Pr).inputs.find((e=>t===Or(e)));return n?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||e.Object.SharedObject.mutable),n?{$kind:"Input",Input:Fr(this,Pr).inputs.indexOf(n),type:"object"}:Hr(this,Ur,Dr).call(this,"object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:G(e)}}:e)}));const e=es();Kr(this,Pr,new kr),Kr(this,Ir,[...e.buildPlugins.values()]),Kr(this,Sr,[...e.serializationPlugins.values()])}static fromKind(n){const r=new t;return Kr(r,Pr,kr.fromKindBytes("string"==typeof n?e.fromBase64(n):n)),Kr(r,Er,Fr(r,Pr).inputs.slice()),Kr(r,Tr,Fr(r,Pr).commands.slice()),r}static from(n){const r=new t;return Xr(n)?Kr(r,Pr,new kr(n.getData())):"string"==typeof n&&n.startsWith("{")?Kr(r,Pr,kr.restore(JSON.parse(n))):Kr(r,Pr,kr.fromBytes("string"==typeof n?e.fromBase64(n):n)),Kr(r,Er,Fr(r,Pr).inputs.slice()),Kr(r,Tr,Fr(r,Pr).commands.slice()),r}static registerGlobalSerializationPlugin(e,t){es().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){es().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){es().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){es().buildPlugins.delete(e)}addSerializationPlugin(e){Fr(this,Sr).push(e)}addBuildPlugin(e){Fr(this,Ir).push(e)}addIntentResolver(e,t){if(Fr(this,xr).has(e)&&Fr(this,xr).get(e)!==t)throw Error(`Intent resolver for ${e} already exists`);Fr(this,xr).set(e,t)}setSender(e){Fr(this,Pr).sender=e}setSenderIfNotSet(e){Fr(this,Pr).sender||(Fr(this,Pr).sender=e)}setExpiration(e){Fr(this,Pr).expiration=e?wn(Vn,e):null}setGasPrice(e){Fr(this,Pr).gasConfig.price=e+""}setGasBudget(e){Fr(this,Pr).gasConfig.budget=e+""}setGasBudgetIfNotSet(e){null==Fr(this,Pr).gasData.budget&&(Fr(this,Pr).gasConfig.budget=e+"")}setGasOwner(e){Fr(this,Pr).gasConfig.owner=e}setGasPayment(e){Fr(this,Pr).gasConfig.payment=e.map((e=>wn(En,e)))}get blockData(){return rr(Fr(this,Pr).snapshot())}getData(){return Fr(this,Pr).snapshot()}get[Zr](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:wr((e=>M(e)?Hr(this,Ur,Dr).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):Hr(this,Ur,Dr).call(this,"pure",nn(Rn,e)?wn(Rn,e):e instanceof Uint8Array?mr.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}})))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(mr.ObjectRef(...e))}receivingRef(...e){return this.object(mr.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(mr.SharedObjectRef(...e))}add(e){if("function"==typeof e){if(Fr(this,Br).has(e))return Fr(this,Br).get(e);const t=Hr(this,Ur,Ar).call(this),n=e(t);if(!n||"object"!=typeof n||!("then"in n))return Kr(this,Cr,Fr(t,Cr)),Fr(this,Br).set(e,n),n;const r=Hr(this,Ur,$r).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{result:null}}});Fr(this,Mr).add(Promise.resolve(n).then((e=>{r.$Intent.data.result=e})));const s=Jr(Fr(this,Pr).commands.length-1);return Fr(this,Br).set(e,s),s}return Hr(this,Ur,$r).call(this,e),Jr(Fr(this,Pr).commands.length-1)}splitCoins(e,t){const n=Nn.SplitCoins("string"==typeof e?this.object(e):Hr(this,Ur,Vr).call(this,e),t.map((e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):Hr(this,Ur,Rr).call(this,e))));return Hr(this,Ur,$r).call(this,n),Jr(Fr(this,Pr).commands.length-1,t.length)}mergeCoins(e,t){return this.add(Nn.MergeCoins(this.object(e),t.map((e=>this.object(e)))))}publish({modules:e,dependencies:t}){return this.add(Nn.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:n,ticket:r}){return this.add(Nn.Upgrade({modules:e,dependencies:t,package:n,ticket:this.object(r)}))}moveCall({arguments:e,...t}){return this.add(Nn.MoveCall({...t,arguments:e?.map((e=>Hr(this,Ur,Rr).call(this,e)))}))}transferObjects(e,t){return this.add(Nn.TransferObjects(e.map((e=>this.object(e))),"string"==typeof t?this.pure.address(t):Hr(this,Ur,Rr).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(Nn.MakeMoveVec({type:e,elements:t.map((e=>this.object(e)))}))}serialize(){return JSON.stringify(rr(Fr(this,Pr).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(wn(fr,Fr(this,Pr).snapshot()),((e,t)=>"bigint"==typeof t?""+t:t),2)}async sign(e){const{signer:t,...n}=e,r=await this.build(n);return t.signTransaction(r)}async build(e={}){return await this.prepareForSerialization(e),await Hr(this,Ur,zr).call(this,e),Fr(this,Pr).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await Hr(this,Ur,zr).call(this,e),Fr(this,Pr).getDigest()}async prepareForSerialization(e){await Hr(this,Ur,_r).call(this),Hr(this,Ur,qr).call(this);const t=new Set;for(const e of Fr(this,Pr).commands)e.$Intent&&t.add(e.$Intent.name);const n=[...Fr(this,Sr)];for(const r of t)if(!e.supportedIntents?.includes(r)){if(!Fr(this,xr).has(r))throw Error("Missing intent resolver for "+r);n.push(Fr(this,xr).get(r))}await Hr(this,Ur,Nr).call(this,n,e)}};Sr=new WeakMap,Ir=new WeakMap,xr=new WeakMap,Er=new WeakMap,Tr=new WeakMap,Cr=new WeakMap,Mr=new WeakMap,Br=new WeakMap,Pr=new WeakMap,Ur=new WeakSet,Ar=function(){const e=new ts;return Kr(e,Pr,Fr(this,Pr)),Kr(e,Sr,Fr(this,Sr)),Kr(e,Ir,Fr(this,Ir)),Kr(e,xr,Fr(this,xr)),Kr(e,Mr,Fr(this,Mr)),Kr(e,Cr,new Set(Fr(this,Cr))),Kr(e,Br,Fr(this,Br)),Fr(this,Er).push(Fr(e,Er)),Fr(this,Tr).push(Fr(e,Tr)),e},$r=function(e){const t=Fr(this,Pr).commands.length;return Fr(this,Tr).push(e),Fr(this,Cr).add(t),Fr(this,Pr).commands.push(e),Fr(this,Pr).mapCommandArguments(t,(e=>{if("Result"===e.$kind&&!Fr(this,Cr).has(e.Result))throw Error(`Result { Result: ${e.Result} } is not available to use the current transaction`);if("NestedResult"===e.$kind&&!Fr(this,Cr).has(e.NestedResult[0]))throw Error(`Result { NestedResult: [${e.NestedResult[0]}, ${e.NestedResult[1]}] } is not available to use the current transaction`);if("Input"===e.$kind&&e.Input>=Fr(this,Pr).inputs.length)throw Error(`Input { Input: ${e.Input} } references an input that does not exist in the current transaction`);return e})),e},Dr=function(e,t){return Fr(this,Er).push(t),Fr(this,Pr).addInput(e,t)},Rr=function(e){return M(e)?this.pure(e):Hr(this,Ur,Vr).call(this,e)},Vr=function(e){if("function"==typeof e){const t=this.add(e);return"function"==typeof t?Hr(this,Ur,Vr).call(this,t):wn(Tn,t)}return wn(Tn,e)},zr=async function(e){if(!e.onlyTransactionKind&&!Fr(this,Pr).sender)throw Error("Missing transaction sender");await Hr(this,Ur,Nr).call(this,[...Fr(this,Ir),br],e)},Nr=async function(e,t){const n=r=>{if(r>=e.length)return()=>{};const s=e[r];return async()=>{const e=n(r+1);let i=!1,a=!1;if(await s(Fr(this,Pr),t,(async()=>{if(i)throw Error("next() was call multiple times in TransactionPlugin "+r);i=!0,await e(),a=!0})),!i)throw Error("next() was not called in TransactionPlugin "+r);if(!a)throw Error("next() was not awaited in TransactionPlugin "+r)}};await n(0)(),Kr(this,Er,Fr(this,Pr).inputs.slice()),Kr(this,Tr,Fr(this,Pr).commands.slice())},_r=async function(){for(;Fr(this,Mr).size>0;){const e=Promise.all(Fr(this,Mr));Fr(this,Mr).clear(),Fr(this,Mr).add(e),await e,Fr(this,Mr).delete(e)}},qr=function(){const e=Fr(this,Pr).commands,t=Fr(this,Pr).inputs,n=Fr(this,Tr).flat(1/0),r=Fr(this,Er).flat(1/0);if(n.length!==e.length)throw Error("Unexpected number of commands found in transaction data");if(r.length!==t.length)throw Error("Unexpected number of inputs found in transaction data");const s=n.filter((e=>"AsyncTransactionThunk"!==e.$Intent?.name));function i(t){const n=e[t];if("AsyncTransactionThunk"===n.$Intent?.name){const e=n.$Intent.data.result;if(null==e)throw Error("AsyncTransactionThunk has not been resolved");return i(e.Result)}const r=s.indexOf(n);if(-1===r)throw Error("Unable to find original index for command");return r}Fr(this,Pr).commands=s,Fr(this,Pr).inputs=r,Kr(this,Tr,s),Kr(this,Er,r),Fr(this,Pr).mapArguments((e=>{if("Input"===e.$kind){const n=r.indexOf(t[e.Input]);if(-1===n)throw Error("Input has not been resolved");return{...e,Input:n}}if("Result"===e.$kind){const t=i(e.Result);return{...e,Result:t}}if("NestedResult"===e.$kind){const t=i(e.NestedResult[0]);return{...e,NestedResult:[t,e.NestedResult[1]]}}return e}))};let ns=ts;class rs extends Kt{constructor(){super(...arguments),this.core=this}async getObject(e){const{objectId:t}=e,{objects:[n]}=await this.getObjects({objectIds:[t],signal:e.signal});if(n instanceof Error)throw n;return{object:n}}async getDynamicField(e){const t=function(e,t,n){const r=it.Address.serialize(e).toBytes(),s=it.TypeTag.serialize(t).toBytes(),i=it.u64().serialize(n.length).toBytes(),a=ne.create({dkLen:32});return a.update(new Uint8Array([240])),a.update(r),a.update(i),a.update(n),a.update(s),"0x"+h(a.digest().slice(0,32))}(e.parentId,ie.parseFromStr(e.name.type),e.name.bcs),{objects:[n]}=await this.getObjects({objectIds:[t],signal:e.signal});if(n instanceof Error)throw n;const r=L(n.type);return{dynamicField:{id:n.id,digest:n.digest,version:n.version,type:n.type,name:{type:"string"==typeof r.typeParams[0]?r.typeParams[0]:F(r.typeParams[0]),bcs:e.name.bcs},value:{type:"string"==typeof r.typeParams[1]?r.typeParams[1]:F(r.typeParams[1]),bcs:n.content.slice(32+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:t=6e4,...n}){const r=e?AbortSignal.any([AbortSignal.timeout(t),e]):AbortSignal.timeout(t),s=new Promise(((e,t)=>{r.addEventListener("abort",(()=>t(r.reason)))}));for(s.catch((()=>{}));;){r.throwIfAborted();try{return await this.getTransaction({...n,signal:r})}catch(e){await Promise.race([new Promise((e=>setTimeout(e,2e3))),s])}}}}class ss extends Error{}class is extends ss{constructor(e,t){super(t),this.code=e}static fromResponse(e,t){switch(e.code){case"notExists":return new is(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new is(e.code,"Dynamic field not found for object "+e.parent_object_id);case"deleted":return new is(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new is(e.code,"Display error: "+e.error);default:return new is(e.code,"Unknown error while loading object"+(t?" "+t:""))}}}function as(e){if("string"==typeof e)switch(e){case"address":return it.Address;case"bool":return it.Bool;case"u8":return it.U8;case"u16":return it.U16;case"u32":return it.U32;case"u64":return it.U64;case"u128":return it.U128;case"u256":return it.U256;default:throw Error("Unknown type signature "+e)}if("vector"in e){if("u8"===e.vector)return it.vector(it.U8).transform({input:e=>"string"==typeof e?(new TextEncoder).encode(e):e,output:e=>e});const t=as(e.vector);return t?it.vector(t):null}if("datatype"in e){const t=G(e.datatype.package);if(t===G("0x1")){if("ascii"===e.datatype.module&&"String"===e.datatype.type)return it.String;if("string"===e.datatype.module&&"String"===e.datatype.type)return it.String;if("option"===e.datatype.module&&"Option"===e.datatype.type){const t=as(e.datatype.typeParameters[0]);return t?it.vector(t):null}}if(t===G("0x2")&&"object"===e.datatype.module&&"ID"===e.datatype.type)return it.Address}return null}function os(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw Error("Unexpected type "+e)}if("Vector"in e)return{vector:os(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(os)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw Error("Unexpected type "+JSON.stringify(e))}function us(e){const t=it.TransactionEffects.parse(e);switch(t.$kind){case"V1":return function(){throw Error("V1 effects are not supported yet")}();case"V2":return function({bytes:e,effects:t}){const n=t.changedObjects.map((([e,n])=>({id:e,inputState:"Exist"===n.inputState.$kind?"Exists":"DoesNotExist",inputVersion:n.inputState.Exist?.[0][0]??null,inputDigest:n.inputState.Exist?.[0][1]??null,inputOwner:n.inputState.Exist?.[1]??null,outputState:"NotExist"===n.outputState.$kind?"DoesNotExist":n.outputState.$kind,outputVersion:"PackageWrite"===n.outputState.$kind?n.outputState.PackageWrite?.[0]:n.outputState.ObjectWrite?t.lamportVersion:null,outputDigest:"PackageWrite"===n.outputState.$kind?n.outputState.PackageWrite?.[1]:n.outputState.ObjectWrite?.[0]??null,outputOwner:n.outputState.ObjectWrite?n.outputState.ObjectWrite[1]:null,idOperation:n.idOperation.$kind})));return{bcs:e,digest:t.transactionDigest,version:2,status:"Success"===t.status.$kind?{success:!0,error:null}:{success:!1,error:t.status.Failed.error.$kind},gasUsed:t.gasUsed,transactionDigest:t.transactionDigest,gasObject:null===t.gasObjectIndex?null:n[t.gasObjectIndex]??null,eventsDigest:t.eventsDigest,dependencies:t.dependencies,lamportVersion:t.lamportVersion,changedObjects:n,unchangedSharedObjects:t.unchangedSharedObjects.map((([e,t])=>({kind:t.$kind,objectId:e,version:"ReadOnlyRoot"===t.$kind?t.ReadOnlyRoot[0]:t[t.$kind],digest:"ReadOnlyRoot"===t.$kind?t.ReadOnlyRoot[1]:null}))),auxiliaryDataDigest:t.auxDataDigest}}({bytes:e,effects:t.V2});default:throw Error("Unknown transaction effects version: "+t.$kind)}}const cs=5e10;function ls(e){return async function(t,n,r){return await async function(e,t){const{inputs:n,commands:r}=e,s=[],i=new Set;r.forEach((t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map((t=>"Input"===t.$kind?e.inputs[t.Input]:null)).some((e=>e?.UnresolvedPure||e?.UnresolvedObject))){i.add(`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`),s.push(t.MoveCall)}}}));const a=new Map;i.size>0&&await Promise.all([...i].map((async e=>{const[n,r,s]=e.split("::"),i=await t.getNormalizedMoveFunction({package:n,module:r,function:s});a.set(e,i.parameters.map((e=>function(e){return"object"==typeof e&&"Reference"in e?{ref:"&",body:os(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:os(e.MutableReference)}:{ref:null,body:os(e)}}(e))))})));s.length&&await Promise.all(s.map((async e=>{const t=a.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;const n=t.length>0&&function(e){const t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&G(t.package)===G("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=n})));r.forEach((e=>{if(!e.MoveCall)return;const t=e.MoveCall,r=t._argumentTypes;if(r){if(r.length!==e.MoveCall.arguments.length)throw Error("Incorrect number of arguments for "+`${t.package}::${t.module}::${t.function}`);r.forEach(((e,r)=>{const s=t.arguments[r];if("Input"!==s.$kind)return;const i=n[s.Input];if(!i.UnresolvedPure&&!i.UnresolvedObject)return;const a=i.UnresolvedPure?.value??i.UnresolvedObject?.objectId,o=as(e.body);if(o)return s.type="pure",void(n[n.indexOf(i)]=mr.Pure(o.serialize(a)));if("string"!=typeof a)throw Error("Expect the argument to be an object id string, got "+JSON.stringify(a,null,2));s.type="object";n[s.Input]=i.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:i}))}}))}(t,e),await async function(e,t){const n=e.inputs.filter((e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion))),r=[...new Set(n.map((e=>K(e.UnresolvedObject.objectId))))],s=r.length?function(e,t){return Array.from({length:Math.ceil(e.length/t)},((n,r)=>e.slice(r*t,(r+1)*t)))}(r,50):[],i=(await Promise.all(s.map((e=>t.multiGetObjects({ids:e,options:{showOwner:!0}}))))).flat(),a=new Map(r.map(((e,t)=>[e,i[t]]))),o=Array.from(a).filter((([e,t])=>t.error)).map((([e,t])=>JSON.stringify(t.error)));if(o.length)throw Error("The following input objects are invalid: "+o.join(", "));const u=i.map((e=>{if(e.error||!e.data)throw Error("Failed to fetch object: "+e.error);const t=e.data.owner;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:t&&"object"==typeof t&&"Shared"in t?t.Shared.initial_shared_version:null}})),c=new Map(r.map(((e,t)=>[e,u[t]])));for(const[t,n]of e.inputs.entries()){if(!n.UnresolvedObject)continue;let r;const s=G(n.UnresolvedObject.objectId),i=c.get(s);n.UnresolvedObject.initialSharedVersion??i?.initialSharedVersion?r=mr.SharedObjectRef({objectId:s,initialSharedVersion:n.UnresolvedObject.initialSharedVersion||i?.initialSharedVersion,mutable:ds(e,t)}):ps(e,t)&&(r=mr.ReceivingRef({objectId:s,digest:n.UnresolvedObject.digest??i?.digest,version:n.UnresolvedObject.version??i?.version})),e.inputs[e.inputs.indexOf(n)]=r??mr.ObjectRef({objectId:s,digest:n.UnresolvedObject.digest??i?.digest,version:n.UnresolvedObject.version??i?.version})}}(t,e),n.onlyTransactionKind||(await async function(e,t){e.gasConfig.price||(e.gasConfig.price=await t.getReferenceGasPrice()+"")}(t,e),await async function(e,t){if(e.gasConfig.budget)return;const n=await t.dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:cs+"",payment:[]}}})});if("success"!==n.effects.status.status)throw Error("Dry run failed, could not automatically determine a budget: "+n.effects.status.error,{cause:n});const r=1000n*BigInt(e.gasConfig.price||1n),s=BigInt(n.effects.gasUsed.computationCost)+r,i=s+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);e.gasConfig.budget=(i>s?i:s)+""}(t,e),await async function(e,t){if(!e.gasConfig.payment){const n=(await t.getCoins({owner:e.gasConfig.owner||e.sender,coinType:H})).data.filter((t=>!e.inputs.find((e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)))).map((e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version})));if(!n.length)throw Error("No valid gas coins found for the transaction.");e.gasConfig.payment=n.map((e=>wn(En,e)))}}(t,e)),await r()}}function ds(e,t){let n=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const r=t.MoveCall.arguments.indexOf(e);n="&"!==t.MoveCall._argumentTypes[r].ref||n}"MakeMoveVec"!==t.$kind&&"MergeCoins"!==t.$kind&&"SplitCoins"!==t.$kind||(n=!0)})),n}function ps(e,t){let n=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const r=t.MoveCall.arguments.indexOf(e);n=function(e){if("object"!=typeof e.body||!("datatype"in e.body))return!1;return"0x2"===e.body.datatype.package&&"transfer"===e.body.datatype.module&&"Receiving"===e.body.datatype.type}(t.MoveCall._argumentTypes[r])||n}})),n}var hs,gs=e=>{throw TypeError(e)},fs=(e,t,n)=>t.has(e)||gs("Cannot "+n),ms=(e,t,n)=>(fs(e,t,"read from private field"),n?n.call(e):t.get(e));class bs extends rs{constructor(e){var t,n,r;super({network:e.network}),(n=hs).has(t=this)?gs("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,r),((e,t,n)=>{fs(e,t,"write to private field"),t.set(e,n)})(this,hs,e)}async getObjects(e){const t=function(e,t){const n=[];for(let r=0;e.length>r;r+=t)n.push(e.slice(r,r+t));return n}(e.objectIds,50),n=[];for(const r of t){const t=await ms(this,hs).multiGetObjects({ids:r,options:{showOwner:!0,showType:!0,showBcs:!0},signal:e.signal});for(const[e,s]of t.entries())n.push(s.error?is.fromResponse(s.error,r[e]):ys(s.data))}return{objects:n}}async getOwnedObjects(e){const t=await ms(this,hs).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0},signal:e.signal});return{objects:t.data.map((e=>{if(e.error)throw is.fromResponse(e.error);return ys(e.data)})),hasNextPage:t.hasNextPage,cursor:t.nextCursor??null}}async getCoins(e){const t=await ms(this,hs).getCoins({owner:e.address,coinType:e.coinType,limit:e.limit,cursor:e.cursor,signal:e.signal});return{objects:t.data.map((t=>({id:t.coinObjectId,version:t.version,digest:t.digest,balance:t.balance,type:`0x2::coin::Coin<${t.coinType}>`,content:ks.serialize({id:t.coinObjectId,balance:{value:t.balance}}).toBytes(),owner:{$kind:"ObjectOwner",ObjectOwner:e.address}}))),hasNextPage:t.hasNextPage,cursor:t.nextCursor??null}}async getBalance(e){const t=await ms(this,hs).getBalance({owner:e.address,coinType:e.coinType,signal:e.signal});return{balance:{coinType:t.coinType,balance:t.totalBalance}}}async getAllBalances(e){return{balances:(await ms(this,hs).getAllBalances({owner:e.address,signal:e.signal})).map((e=>({coinType:e.coinType,balance:e.totalBalance}))),hasNextPage:!1,cursor:null}}async getTransaction(e){return{transaction:ws(await ms(this,hs).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0},signal:e.signal}))}}async executeTransaction(e){return{transaction:ws(await ms(this,hs).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0},signal:e.signal}))}}async dryRunTransaction(e){const t=ns.from(e.transaction),n=await ms(this,hs).dryRunTransactionBlock({transactionBlock:e.transaction,signal:e.signal}),{effects:r,objectTypes:s}=function({bytes:e,effects:t,objectChanges:n}){const r=[],s=[],i={};return n?.forEach((e=>{switch(e.type){case"published":r.push({id:e.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:null,idOperation:"Created"});break;case"transferred":r.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:e.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:e.sender},outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:vs(e.recipient),idOperation:"None"}),i[e.objectId]=e.objectType;break;case"mutated":r.push({id:e.objectId,inputState:"Exists",inputVersion:e.previousVersion,inputDigest:null,inputOwner:vs(e.owner),outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:vs(e.owner),idOperation:"None"}),i[e.objectId]=e.objectType;break;case"deleted":r.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:t.deleted?.find((t=>t.objectId===e.objectId))?.digest??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted"}),i[e.objectId]=e.objectType;break;case"wrapped":r.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:e.sender},outputState:"ObjectWrite",outputVersion:e.version,outputDigest:t.wrapped?.find((t=>t.objectId===e.objectId))?.digest??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:e.sender},idOperation:"None"}),i[e.objectId]=e.objectType;break;case"created":r.push({id:e.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:vs(e.owner),idOperation:"Created"}),i[e.objectId]=e.objectType}})),{objectTypes:i,effects:{bcs:e??null,digest:t.transactionDigest,version:2,status:"success"===t.status.status?{success:!0,error:null}:{success:!1,error:t.status.error},gasUsed:t.gasUsed,transactionDigest:t.transactionDigest,gasObject:{id:t.gasObject?.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:t.gasObject.reference.version,outputDigest:t.gasObject.reference.digest,outputOwner:vs(t.gasObject.owner),idOperation:"None"},eventsDigest:t.eventsDigest??null,dependencies:t.dependencies??[],lamportVersion:t.gasObject.reference.version,changedObjects:r,unchangedSharedObjects:s,auxiliaryDataDigest:null}}}({effects:n.effects,objectChanges:n.objectChanges});return{transaction:{digest:await t.getDigest(),epoch:null,effects:r,objectTypes:Promise.resolve(s),signatures:[],transaction:(i=e.transaction,{...kr.fromBytes(i).snapshot(),bcs:i})}};var i}async getReferenceGasPrice(e){return{referenceGasPrice:await ms(this,hs).getReferenceGasPrice({signal:e?.signal})+""}}async getDynamicFields(t){const n=await ms(this,hs).getDynamicFields({parentId:t.parentId,limit:t.limit,cursor:t.cursor});return{dynamicFields:n.data.map((t=>({id:t.objectId,type:t.objectType,name:{type:t.name.type,bcs:e.fromBase64(t.bcsName)}}))),hasNextPage:n.hasNextPage,cursor:n.nextCursor}}async verifyZkLoginSignature(e){const t=await ms(this,hs).verifyZkLoginSignature({bytes:e.bytes,signature:e.signature,intentScope:e.intentScope,author:e.author});return{success:t.success,errors:t.errors}}resolveTransactionPlugin(){return ls(ms(this,hs))}}function ys(t){return{id:t.objectId,version:t.version,digest:t.digest,type:t.type,content:"moveObject"===t.bcs?.dataType?e.fromBase64(t.bcs.bcsBytes):new Uint8Array,owner:vs(t.owner)}}function vs(e){if("Immutable"===e)return{$kind:"Immutable",Immutable:!0};if("ConsensusV2"in e)return{$kind:"ConsensusV2",ConsensusV2:{authenticator:{$kind:"SingleOwner",SingleOwner:e.ConsensusV2.authenticator.SingleOwner},startVersion:e.ConsensusV2.start_version}};if("AddressOwner"in e)return{$kind:"AddressOwner",AddressOwner:e.AddressOwner};if("ObjectOwner"in e)return{$kind:"ObjectOwner",ObjectOwner:e.ObjectOwner};if("Shared"in e)return{$kind:"Shared",Shared:{initialSharedVersion:e.Shared.initial_shared_version}};throw Error("Unknown owner type: "+JSON.stringify(e))}function ws(t){const n=it.SenderSignedData.parse(e.fromBase64(t.rawTransaction))[0],r={};t.objectChanges?.forEach((e=>{"published"!==e.type&&(r[e.objectId]=e.objectType)}));const s=it.TransactionData.serialize(n.intentMessage.value).toBytes(),i=kr.restore({version:2,sender:n.intentMessage.value.V1.sender,expiration:n.intentMessage.value.V1.expiration,gasData:n.intentMessage.value.V1.gasData,inputs:n.intentMessage.value.V1.kind.ProgrammableTransaction.inputs,commands:n.intentMessage.value.V1.kind.ProgrammableTransaction.commands});return{digest:t.digest,epoch:t.effects?.executedEpoch??null,effects:us(new Uint8Array(t.rawEffects)),objectTypes:Promise.resolve(r),transaction:{...i,bcs:s},signatures:n.txSignatures}}hs=new WeakMap;const js=it.struct("Balance",{value:it.u64()}),ks=it.struct("Coin",{id:it.Address,balance:js}),Os=Symbol.for("@mysten/SuiClient");exports.JsonRpcError=ut,exports.SuiClient=class extends Kt{constructor(e){super({network:e.network??"unknown"}),this.core=new bs(this),this.jsonRpc=this,this.transport=e.transport??new Vt({url:e.url})}get[Os](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins(e){if(!e.owner||!q(G(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit],signal:e.signal})}async getAllCoins(e){if(!e.owner||!q(G(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance(e){if(!e.owner||!q(G(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType],signal:e.signal})}async getAllBalances(e){if(!e.owner||!q(G(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType],signal:e.signal})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType],signal:e.signal})}async call(e,t,{signal:n}={}){return await this.transport.request({method:e,params:t,signal:n})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package],signal:e.signal})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module],signal:e.signal})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct],signal:e.signal})}async getOwnedObjects(e){if(!e.owner||!q(G(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!W(K(e.id)))throw Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){e.ids.forEach((e=>{if(!e||!W(K(e)))throw Error("Invalid Sui Object id "+e)}));if(e.ids.length!==new Set(e.ids).size)throw Error("Duplicate object ids in batch call "+e.ids);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")],signal:e.signal})}async getTransactionBlock(e){if(!_(e.digest))throw Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){e.digests.forEach((e=>{if(!_(e))throw Error("Invalid Transaction digest "+e)}));if(e.digests.length!==new Set(e.digests).size)throw Error("Duplicate digests in batch call "+e.digests);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:t,signature:n,options:r,requestType:s,signal:i}){const a=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof t?t:e.toBase64(t),Array.isArray(n)?n:[n],r],signal:i});if("WaitForLocalExecution"===s)try{await this.waitForTransaction({digest:a.digest})}catch(e){}return a}async signAndExecuteTransaction({transaction:e,signer:t,...n}){let r;e instanceof Uint8Array?r=e:(e.setSenderIfNotSet(t.toSuiAddress()),r=await e.build({client:this}));const{signature:s,bytes:i}=await t.signTransaction(r);return this.executeTransactionBlock({transactionBlock:i,signature:s,...n})}async getTotalTransactionBlocks({signal:e}={}){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e});return BigInt(t)}async getReferenceGasPrice({signal:e}={}){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e});return BigInt(t)}async getStakes(e){if(!e.owner||!q(G(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach((e=>{if(!e||!W(K(e)))throw Error("Invalid Sui Stake id "+e)})),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")],signal:e.signal})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(t){let n;if(Xr(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=e.toBase64(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof t.transactionBlock)n=t.transactionBlock;else{if(!(t.transactionBlock instanceof Uint8Array))throw Error("Unknown transaction block format.");n=e.toBase64(t.transactionBlock)}return t.signal?.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,t.gasPrice?.toString(),t.epoch],signal:t.signal})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof t.transactionBlock?t.transactionBlock:e.toBase64(t.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!W(K(e.parentId)))throw Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){return await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e})+""}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch],signal:e?.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder],signal:e?.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder],signal:e?.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder],signal:e?.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){const t=await this.getCheckpoint({id:"0",signal:e});return h(d(t.digest).slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...t}){const{nextCursor:n,hasNextPage:r,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit],signal:t.signal});return{hasNextPage:r,nextCursor:n,data:s.map((t=>function(e,t="at"){const n=e.toLowerCase();let r;if(n.includes("@")){if(!D.test(n))throw Error("Invalid SuiNS name "+e);const[t,s]=n.split("@");r=[...t?t.split("."):[],s]}else{if(!R.test(n))throw Error("Invalid SuiNS name "+e);r=n.split(".").slice(0,-1)}return"dot"===t?r.join(".")+".sui":`${r.slice(0,-1).join(".")}@${r[r.length-1]}`}(t,e)))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version],signal:e?.signal})}async verifyZkLoginSignature(e){return await this.transport.request({method:"sui_verifyZkLoginSignature",params:[e.bytes,e.signature,e.intentScope,e.author],signal:e.signal})}async waitForTransaction({signal:e,timeout:t=6e4,pollInterval:n=2e3,...r}){const s=AbortSignal.timeout(t),i=new Promise(((e,t)=>{s.addEventListener("abort",(()=>t(s.reason)))}));for(i.catch((()=>{}));!s.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(r)}catch(e){await Promise.race([new Promise((e=>setTimeout(e,n))),i])}}throw s.throwIfAborted(),Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}},exports.SuiHTTPStatusError=ct,exports.SuiHTTPTransport=Vt,exports.SuiHTTPTransportError=ot;
//# sourceMappingURL=index-Dmr33Bok.js.map
